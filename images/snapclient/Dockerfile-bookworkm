# Dockerfile-snapclient
FROM debian:bookworm-slim

ENV DEBIAN_FRONTEND=noninteractive \
    TZ=Europe/Berlin \
    LANG=C.UTF-8

# Basis: Snapclient + ALSA + tzdata + ca-certificates + dumb-init
RUN apt-get update && apt-get install -y --no-install-recommends \
      snapclient \
      alsa-utils \
      tzdata \
      ca-certificates \
      dumb-init \
    && rm -rf /var/lib/apt/lists/*

# Ein kleiner Healthcheck: lÃ¤uft der snapclient-Prozess?
HEALTHCHECK --interval=30s --timeout=5s --retries=3 \
  CMD pgrep -x snapclient >/dev/null || exit 1

# Wir lassen docker-compose die Argumente setzen (player, soundcard, hostID, server)
# Beispiel siehe compose: --player=alsa --soundcard=dmix:CARD=S51,DEV=0 ...
ENTRYPOINT ["/usr/bin/dumb-init", "--", "snapclient"]
CMD ["--help"]
